<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="tune_sim_anneal() uses an iterative search procedure to generate new
candidate tuning parameter combinations based on previous results. It uses
the generalized simulated annealing method of Bohachevsky, Johnson, and
Stein (1986)."><title>Optimization of model parameters via simulated annealing — tune_sim_anneal • finetune</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.7/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.7/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimization of model parameters via simulated annealing — tune_sim_anneal"><meta property="og:description" content="tune_sim_anneal() uses an iterative search procedure to generate new
candidate tuning parameter combinations based on previous results. It uses
the generalized simulated annealing method of Bohachevsky, Johnson, and
Stein (1986)."><meta property="og:image" content="https://finetune.tidymodels.org/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="finetune.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">finetune</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidymodels/finetune/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Optimization of model parameters via simulated annealing</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/finetune/blob/HEAD/R/tune_sim_anneal.R" class="external-link"><code>R/tune_sim_anneal.R</code></a></small>
      <div class="d-none name"><code>tune_sim_anneal.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>tune_sim_anneal()</code> uses an iterative search procedure to generate new
candidate tuning parameter combinations based on previous results. It uses
the generalized simulated annealing method of Bohachevsky, Johnson, and
Stein (1986).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tune_sim_anneal</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for model_spec</span></span>
<span><span class="fu">tune_sim_anneal</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">preprocessor</span>,</span>
<span>  <span class="va">resamples</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  param_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  metrics <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  initial <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="control_sim_anneal.html">control_sim_anneal</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  eval_time <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for workflow</span></span>
<span><span class="fu">tune_sim_anneal</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">resamples</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  param_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  metrics <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  initial <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="control_sim_anneal.html">control_sim_anneal</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  eval_time <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>A <code>parsnip</code> model specification or a <code><a href="https://workflows.tidymodels.org/reference/workflow.html" class="external-link">workflows::workflow()</a></code>.</p></dd>


<dt>...</dt>
<dd><p>Not currently used.</p></dd>


<dt>preprocessor</dt>
<dd><p>A traditional model formula or a recipe created using
<code><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipes::recipe()</a></code>. This is only required when <code>object</code> is not a workflow.</p></dd>


<dt>resamples</dt>
<dd><p>An <code>rset()</code> object.</p></dd>


<dt>iter</dt>
<dd><p>The maximum number of search iterations.</p></dd>


<dt>param_info</dt>
<dd><p>A <code><a href="https://dials.tidymodels.org/reference/parameters.html" class="external-link">dials::parameters()</a></code> object or <code>NULL</code>. If none is given,
a parameter set is derived from other arguments. Passing this argument can
be useful when parameter ranges need to be customized.</p></dd>


<dt>metrics</dt>
<dd><p>A <code><a href="https://yardstick.tidymodels.org/reference/metric_set.html" class="external-link">yardstick::metric_set()</a></code> object containing information on how
models will be evaluated for performance. The first metric in <code>metrics</code> is the
one that will be optimized.</p></dd>


<dt>initial</dt>
<dd><p>An initial set of results in a tidy format (as would the result
of <code><a href="https://tune.tidymodels.org/reference/tune_grid.html" class="external-link">tune_grid()</a></code>, <code><a href="https://tune.tidymodels.org/reference/tune_bayes.html" class="external-link">tune_bayes()</a></code>, <code><a href="tune_race_win_loss.html">tune_race_win_loss()</a></code>, or
<code><a href="tune_race_anova.html">tune_race_anova()</a></code>) or a positive integer. If the initial object was a
sequential search method, the simulated annealing iterations start after the
last iteration of the initial results.</p></dd>


<dt>control</dt>
<dd><p>The results of <code><a href="control_sim_anneal.html">control_sim_anneal()</a></code>.</p></dd>


<dt>eval_time</dt>
<dd><p>A numeric vector of time points where dynamic event time
metrics should be computed (e.g. the time-dependent ROC curve, etc). The
values must be non-negative and should probably be no greater than the
largest event time in the training set (See Details below).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tibble of results that mirror those generated by <code><a href="https://tune.tidymodels.org/reference/tune_grid.html" class="external-link">tune_grid()</a></code>.
However, these results contain an <code>.iter</code> column and replicate the <code>rset</code></p>


<p>object multiple times over iterations (at limited additional memory costs).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Simulated annealing is a global optimization method. For model tuning, it
can be used to iteratively search the parameter space for optimal tuning
parameter combinations. At each iteration, a new parameter combination is
created by perturbing the current parameters in some small way so that they
are within a small neighborhood. This new parameter combination is used to
fit a model and that model's performance is measured using resampling (or a
simple validation set).</p>
<p>If the new settings have better results than the current settings, they are
accepted and the process continues.</p>
<p>If the new settings has worse performance, a probability threshold is
computed for accepting these sub-optimal values. The probability is a
function of <em>how</em> sub-optimal the results are as well as how many iterations
have elapsed. This is referred to as the "cooling schedule" for the
algorithm. If the sub-optimal results are accepted, the next iterations
settings are based on these inferior results. Otherwise, new parameter
values are generated from the previous iteration's settings.</p>
<p>This process continues for a pre-defined number of iterations and the
overall best settings are recommended for use. The <code><a href="control_sim_anneal.html">control_sim_anneal()</a></code>
function can specify the number of iterations without improvement for early
stopping. Also, that function can be used to specify a <em>restart</em> threshold;
if no globally best results have not be discovered within a certain number
if iterations, the process can restart using the last known settings that
globally best.</p><div class="section">
<h3 id="creating-new-settings">Creating new settings<a class="anchor" aria-label="anchor" href="#creating-new-settings"></a></h3>


<p>For each numeric parameter, the range of possible values is known as well
as any transformations. The current values are transformed and scaled to
have values between zero and one (based on the possible range of values). A
candidate set of values that are on a sphere with random radii between
<code>rmin</code> and <code>rmax</code> are generated. Infeasible values are removed and one value
is chosen at random. This value is back transformed to the original units
and scale and are used as the new settings. The argument <code>radius</code> of
<code><a href="control_sim_anneal.html">control_sim_anneal()</a></code> controls the range neighborhood sizes.</p>
<p>For categorical and integer parameters, each is changes with a pre-defined
probability. The <code>flip</code> argument of <code><a href="control_sim_anneal.html">control_sim_anneal()</a></code> can be used to
specify this probability. For integer parameters, a nearby integer value is
used.</p>
<p>Simulated annealing search may not be the preferred method when many of the
parameters are non-numeric or integers with few unique values. In these
cases, it is likely that the same candidate set may be tested more than
once.</p>
</div>

<div class="section">
<h3 id="cooling-schedule">Cooling schedule<a class="anchor" aria-label="anchor" href="#cooling-schedule"></a></h3>


<p>To determine the probability of accepting a new value, the percent
difference in performance is calculated. If the performance metric is to be
maximized, this would be <code>d = (new-old)/old*100</code>. The probability is
calculated as <code>p = exp(d * coef * iter)</code> were <code>coef</code> is a user-defined
constant that can be used to increase or decrease the probabilities.</p>
<p>The <code>cooling_coef</code> of <code><a href="control_sim_anneal.html">control_sim_anneal()</a></code> can be used for this purpose.</p>
</div>

<div class="section">
<h3 id="termination-criterion">Termination criterion<a class="anchor" aria-label="anchor" href="#termination-criterion"></a></h3>


<p>The restart counter is reset when a new global best results is found.</p>
<p>The termination counter resets when a new global best is located or when a
suboptimal result is improved.</p>
</div>

<div class="section">
<h3 id="parallelism">Parallelism<a class="anchor" aria-label="anchor" href="#parallelism"></a></h3>


<p>The <code>tune</code> and <code>finetune</code> packages currently parallelize over resamples.
Specifying a parallel back-end will improve the generation of the initial
set of sub-models (if any). Each iteration of the search are also run in
parallel if a parallel backend is registered.</p>
</div>

<div class="section">
<h3 id="censored-regression-models">Censored regression models<a class="anchor" aria-label="anchor" href="#censored-regression-models"></a></h3>


<p>With dynamic performance metrics (e.g. Brier or ROC curves), performance is
calculated for every value of <code>eval_time</code> but the <em>first</em> evaluation time
given by the user (e.g., <code>eval_time[1]</code>) is used to guide the optimization.</p>
<p>Also, values of <code>eval_time</code> should be less than the largest observed event
time in the training data. For many non-parametric models, the results beyond
the largest time corresponding to an event are constant (or <code>NA</code>).</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Bohachevsky, Johnson, and Stein (1986) "Generalized Simulated Annealing for
Function Optimization", <em>Technometrics</em>, 28:3, 209-217</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://tune.tidymodels.org/reference/tune_grid.html" class="external-link">tune::tune_grid()</a></code>, <code><a href="control_sim_anneal.html">control_sim_anneal()</a></code>, <code><a href="https://yardstick.tidymodels.org/reference/metric_set.html" class="external-link">yardstick::metric_set()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/finetune" class="external-link">finetune</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bethatkinson/rpart" class="external-link">rpart</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘rpart’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:dials’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     prune</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:MASS’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     select</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tune.tidymodels.org/" class="external-link">tune</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsample.tidymodels.org" class="external-link">rsample</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/parsnip" class="external-link">parsnip</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/workflows" class="external-link">workflows</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## -----------------------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">is_installed</a></span><span class="op">(</span><span class="st">"modeldata"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">two_class_dat</span>, package <span class="op">=</span> <span class="st">"modeldata"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">5046</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">bt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/bootstraps.html" class="external-link">bootstraps</a></span><span class="op">(</span><span class="va">two_class_dat</span>, times <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">## -----------------------------------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">cart_mod</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://parsnip.tidymodels.org/reference/decision_tree.html" class="external-link">decision_tree</a></span><span class="op">(</span>cost_complexity <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html" class="external-link">tune</a></span><span class="op">(</span><span class="op">)</span>, min_n <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html" class="external-link">tune</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"rpart"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_args.html" class="external-link">set_mode</a></span><span class="op">(</span><span class="st">"classification"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">## -----------------------------------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># For reproducibility, set the seed before running.</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">sa_search</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="va">cart_mod</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">tune_sim_anneal</span><span class="op">(</span><span class="va">Class</span> <span class="op">~</span> <span class="va">.</span>, resamples <span class="op">=</span> <span class="va">bt</span>, iter <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">sa_search</span>, metric <span class="op">=</span> <span class="st">"roc_auc"</span>, type <span class="op">=</span> <span class="st">"parameters"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">## -----------------------------------------------------------------------------</span></span></span>
<span class="r-in"><span>  <span class="co"># More iterations. `initial` can be any other tune_* object or an integer</span></span></span>
<span class="r-in"><span>  <span class="co"># (for new values).</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">11</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">more_search</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="va">cart_mod</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>    <span class="fu">tune_sim_anneal</span><span class="op">(</span><span class="va">Class</span> <span class="op">~</span> <span class="va">.</span>, resamples <span class="op">=</span> <span class="va">bt</span>, iter <span class="op">=</span> <span class="fl">10</span>, initial <span class="op">=</span> <span class="va">sa_search</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">more_search</span>, metric <span class="op">=</span> <span class="st">"roc_auc"</span>, type <span class="op">=</span> <span class="st">"performance"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">Optimizing roc_auc</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">Initial best: 0.81147</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">1 </span><span style="color: #00BB00;">♥ new best          </span><span style="color: #000000;"> roc_auc=0.82651 (+/-0.004242)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">2 </span><span style="color: #00BB00;">♥ new best          </span><span style="color: #000000;"> roc_auc=0.83439 (+/-0.009983)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">3 </span><span style="color: #00BB00;">♥ new best          </span><span style="color: #000000;"> roc_auc=0.83912 (+/-0.007893)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">4 </span><span style="color: #00BB00;">♥ new best          </span><span style="color: #000000;"> roc_auc=0.84267 (+/-0.006609)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">5 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83949 (+/-0.008792)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">6 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83751 (+/-0.01065)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">7 </span><span style="color: #00BB00;">+ better suboptimal </span><span style="color: #000000;"> roc_auc=0.84225 (+/-0.009044)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">8 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83736 (+/-0.01063)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">9 </span><span style="color: #00BB00;">+ better suboptimal </span><span style="color: #000000;"> roc_auc=0.84225 (+/-0.009044)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">10 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.84225 (+/-0.009044)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">There were 10 previous iterations</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">Optimizing roc_auc</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">10 </span><span style="color: #0000BB;">✔ initial           </span><span style="color: #000000;"> roc_auc=0.84267 (+/-0.006609)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">11 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83949 (+/-0.008792)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">12 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83736 (+/-0.01063)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">13 </span><span style="color: #00BB00;">+ better suboptimal </span><span style="color: #000000;"> roc_auc=0.84225 (+/-0.009044)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">14 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.84225 (+/-0.009044)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">15 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83751 (+/-0.01065)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">16 </span><span style="color: #00BB00;">+ better suboptimal </span><span style="color: #000000;"> roc_auc=0.84225 (+/-0.009044)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">17 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83949 (+/-0.008792)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">18 </span><span style="color: #BB0000;">✖ restart from best </span><span style="color: #000000;"> roc_auc=0.8421 (+/-0.007206)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">19 </span><span style="color: #BBBB00;">◯ accept suboptimal </span><span style="color: #000000;"> roc_auc=0.83928 (+/-0.007538)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #000000;">20 </span><span style="color: #BB0000;">─ discard suboptimal</span><span style="color: #000000;"> roc_auc=0.82378 (+/-0.01017)</span></span>
<span class="r-plt img"><img src="tune_sim_anneal-1.png" alt="" width="768" height="552"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer></body></html>

